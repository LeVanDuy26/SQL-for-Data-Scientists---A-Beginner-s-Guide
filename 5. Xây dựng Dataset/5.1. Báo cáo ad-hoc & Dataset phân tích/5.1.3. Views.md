### 1. Định nghĩa và Bản chất của Views

Views là một trong hai phương pháp chính (cùng với Common Table Expressions – CTEs) được sử dụng để lưu trữ các truy vấn tạo ra các tập dữ liệu tùy chỉnh nhằm mục đích tái sử dụng trong các báo cáo và phân tích.

* **View lưu trữ câu lệnh SQL:** Khác với một bảng (table) vật lý lưu trữ dữ liệu tĩnh (a stored snapshot of data),  **View lưu trữ bản thân câu lệnh SQL** .
* **Hoạt động như một bảng:** View được xử lý **giống như một bảng** trong SQL. Bạn có thể viết các câu lệnh `SELECT` để truy vấn từ view đó như thể nó là một bảng cơ sở dữ liệu bình thường.
* **Không lưu trữ kết quả:** Kết quả của view **không được lưu trữ** vĩnh viễn. View chỉ tồn tại dưới dạng định nghĩa truy vấn.

### 2. Tạo Bộ dữ liệu Động và Đảm bảo Tính Cập nhật Thường xuyên

Vai trò quan trọng nhất của Views trong phân tích dữ liệu là khả năng tạo ra các bộ dữ liệu **động (dynamically)** và **thường xuyên cập nhật** (freshest data).

* **Chạy theo yêu cầu (On-demand):** View sẽ chạy câu lệnh SQL được lưu trữ của nó **theo yêu cầu** mỗi khi bạn truy vấn tên của view. Điều này giúp **tạo ra một tập hợp kết quả dựa trên trạng thái hiện tại** của các đối tượng cơ sở dữ liệu được tham chiếu.
* **Dữ liệu Mới nhất:** Vì view kéo dữ liệu một cách linh hoạt mỗi khi nó được tham chiếu, nó đảm bảo bạn luôn làm việc với **dữ liệu mới nhất có sẵn** (the freshest data available).
* **Ví dụ về Timestamp:** Nếu bạn thêm một cột `CURRENT_TIMESTAMP` khi tạo view, giá trị timestamp trả về sẽ là **thời gian hiện tại** trên máy chủ mỗi khi view được truy vấn, vì view đang tạo ra kết quả động.

### 3. Views trong Báo cáo Ad-hoc và Phân tích

Trong bối cảnh báo cáo Ad-hoc, Views đóng vai trò là "phím tắt" cho các bộ dữ liệu phức tạp:

* **Tái sử dụng Truy vấn Phức tạp:** Views cho phép các nhà phân tích tái sử dụng các truy vấn phức tạp, bao gồm cả việc `JOIN` nhiều bảng, tổng hợp (`SUM`, `AVG`, `GROUP BY`), và các phép tính phức tạp (chẳng hạn như tính toán tỷ lệ phần trăm bán hàng hoặc chiết khấu). Điều này giúp truy vấn tiếp theo trở nên đơn giản hơn.
* **Dễ dàng cho các công cụ BI:** View có thể được đưa vào phần mềm Business Intelligence (BI) như Tableau. Công cụ này sau đó sẽ tham chiếu view, kéo tập dữ liệu tóm tắt/chuyển đổi và sử dụng các trường/kích thước (dimensions) và số đo (measures) đã được xác định trước để xây dựng báo cáo và dashboard.
* **Hiệu suất và sự đánh đổi:** Vì view phải chạy truy vấn SQL bên trong nó một cách linh hoạt, truy vấn tham chiếu đến view có thể **mất nhiều thời gian hơn** để hoàn thành so với truy vấn tham chiếu đến một bảng đã lưu trữ dữ liệu vật lý.

### 4. Cú pháp và Quy ước

Cú pháp để lưu trữ truy vấn dưới dạng View bao gồm việc đặt câu lệnh `SELECT` sau lệnh `CREATE VIEW`:

`CREATE VIEW [schema_name].[view_name] AS [SELECT statement]`.

* **Quy ước đặt tên:** Tên view thường được đặt tiền tố là `vw_` (ví dụ: `vw_sales_by_day_vendor`). Tiền tố này là một chỉ báo (indicator) cho nhà phát triển biết rằng đối tượng họ đang truy vấn là một view (truy vấn được lưu trữ) chứ không phải là một bảng (dữ liệu được lưu trữ).
* **Xóa View:** Nếu muốn xóa một view, bạn sử dụng cú pháp `DROP VIEW [schema_name].[view_name]`. Việc xóa view chỉ xóa tham chiếu được đặt tên đến truy vấn đó, không xóa bất kỳ dữ liệu nào được lưu trữ trong các bảng cơ sở.
