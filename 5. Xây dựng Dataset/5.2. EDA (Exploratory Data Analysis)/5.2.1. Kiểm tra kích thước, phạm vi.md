### Bối cảnh EDA với SQL

**Phân tích Dữ liệu Khám phá (EDA)** là một bước thường được thảo luận như là giai đoạn đầu tiên trong quá trình mô hình hóa dự đoán. Trong giai đoạn này, nhà khoa học dữ liệu sẽ khám phá và làm quen với dữ liệu có sẵn trước khi sử dụng nó để xây dựng mô hình dự đoán.

Việc sử dụng SQL trong EDA cho phép nhà phân tích khám phá  **dữ liệu thô trực tiếp từ các bảng cơ sở dữ liệu** , thay vì phải làm việc với một tập dữ liệu đã được tổng hợp hoặc chuẩn bị sẵn. Nếu bạn được cấp quyền truy cập vào cơ sở dữ liệu lần đầu tiên, đây là loại truy vấn bạn có thể chạy để làm quen với cấu trúc bảng và dữ liệu chứa trong đó.

Một trong những câu hỏi hợp lý đầu tiên mà một nhà phân tích cần hỏi thông qua truy vấn là: **"Kích thước của các bảng là bao nhiêu?"** và  **"Dữ liệu kéo dài bao xa trong quá khứ?"** .

### 1. Kiểm tra Kích thước Bảng (Table Size)

Việc kiểm tra kích thước của bảng là cần thiết để hiểu quy mô của dữ liệu và quản lý hiệu suất truy vấn.

#### A. Sử dụng `LIMIT` để xem trước nhanh chóng

Khi phát triển các truy vấn, đặc biệt là khi làm việc với cơ sở dữ liệu lớn, việc kiểm tra kích thước là quan trọng. Kỹ thuật phổ biến để xem trước dữ liệu mà không cần phải chờ đợi tất cả kết quả được biên dịch là sử dụng mệnh đề  **`LIMIT`** .

* `LIMIT` **đặt số lượng hàng tối đa** được trả về.
* Nó đặc biệt hữu ích khi truy vấn từ cơ sở dữ liệu lớn, vì truy vấn sẽ **dừng thực thi** và hiển thị đầu ra ngay khi nó tạo ra số lượng hàng đã đặt.
* Bằng cách sử dụng `LIMIT` (ví dụ: `LIMIT 10`), nhà phân tích có thể **nhanh chóng xem trước** kết quả của truy vấn hiện tại, kiểm tra tên cột và định dạng của một vài giá trị đầu ra để xác minh rằng chúng trông giống như dự định,,.

#### B. Sử dụng `COUNT(*)` để xác định Tổng số hàng

Để xác định tổng số hàng thực tế trong bảng (mà không bị giới hạn bởi `LIMIT`), bạn có thể sử dụng hàm  **`COUNT(*)`** .

* Việc nhìn vào **tổng số hàng được trả về** (thường được hiển thị ở cuối cửa sổ kết quả) là điều đầu tiên cần xem xét trong đầu ra để xem liệu nó có khớp với kỳ vọng của bạn hay không.
* Trong giai đoạn EDA, bạn có thể chạy một truy vấn đơn giản như `SELECT count(*) FROM [table]` để xác định có bao nhiêu bản ghi. Ví dụ, trong bảng `product`, truy vấn này có thể cho thấy chỉ có 23 sản phẩm được nhập vào cơ sở dữ liệu.
* Việc tính toán này giúp xác nhận **mức độ chi tiết (granularity)** của bảng.

### 2. Kiểm tra Phạm vi Ngày (Date Range/Scope)

Việc hiểu phạm vi ngày của dữ liệu là tối quan trọng, đặc biệt khi phân tích  **xu hướng theo thời gian** .

#### A. Sử dụng `MIN()` và `MAX()`

Để xác định khoảng thời gian mà dữ liệu được thu thập, nhà phân tích sử dụng các hàm tổng hợp để tìm ngày sớm nhất và ngày muộn nhất:

* **Ngày sớm nhất:** Sử dụng hàm **`MIN(field_name)`** trên cột ngày để tìm giá trị ngày thấp nhất (earliest/first) trong bảng,,,.
* **Ngày muộn nhất:** Sử dụng hàm **`MAX(field_name)`** trên cột ngày để tìm giá trị ngày cao nhất (latest/last) trong bảng,,,.

Ví dụ, để trả lời câu hỏi "Dữ liệu kéo dài bao xa," bạn có thể chạy `SELECT min(market_date), max(market_date) FROM farmers_market.vendor_inventory`.

#### B. Ảnh hưởng đến Phân tích Lịch sử và Dự báo

Phạm vi ngày ảnh hưởng trực tiếp đến khả năng phân tích và mô hình hóa:

* **Xác định chiều sâu lịch sử:** Nếu dữ liệu chỉ có **khoảng một năm rưỡi** hồ sơ, nhà phân tích sẽ phải giải thích rằng họ có **dữ liệu đào tạo bị hạn chế** cho bất kỳ loại dự báo nào liên quan đến tính **thời vụ hàng năm** (annual seasonality).
* **Kiểm tra tính đồng bộ:** EDA cho phép so sánh phạm vi ngày giữa các bảng khác nhau. Ví dụ, nhà phân tích nên kiểm tra xem dữ liệu mua hàng (`customer_purchases`) có được thu thập trong cùng khung thời gian với dữ liệu tồn kho (`vendor_inventory`) hay không,.
* **Phát hiện lỗ hổng dữ liệu:** Bằng cách khám phá dữ liệu theo thời gian (ví dụ: tổng hợp theo tháng và năm), bạn có thể phát hiện ra rằng một số tháng không được liệt kê (ví dụ: không có dữ liệu tháng 1 và tháng 2), điều này cho thấy thị trường có thể đã đóng cửa hoặc có vấn đề với dữ liệu. Việc phát hiện những điều này trong giai đoạn EDA giúp nhà phân tích biết **những gì mong đợi** trong đầu ra báo cáo.
* **Mô hình hóa:** Trong mô hình hóa dự đoán, các tập dữ liệu thường cần được **lọc theo phạm vi thời gian** từ quá khứ để huấn luyện mô hình dự đoán kết quả trong tương lai. Việc hiểu rõ ngày bắt đầu và kết thúc của dữ liệu là cần thiết để thiết lập các ràng buộc thời gian (time-bounded) chính xác cho biến mục tiêu,.

### 3. Tối ưu hóa Truy vấn trong EDA

Trong giai đoạn EDA, mục tiêu thường là di chuyển nhanh chóng và viết truy vấn cho thông tin của riêng mình, không nhất thiết phải định dạng cho mục đích hiển thị,.

* **Sử dụng `LIMIT` và `COUNT` cùng nhau:** Đầu tiên, sử dụng `LIMIT` để xem xét tên cột, loại dữ liệu và các trường hợp ngoại lệ (edge cases) như giá trị `NULL`,,. Sau đó, loại bỏ `LIMIT` và chạy lại để lấy `COUNT(*)` để xác nhận quy mô dữ liệu,.
* **Thẩm định đầu ra:** Sau khi có kết quả đầu tiên, việc kiểm tra số lượng hàng trả về giúp xác nhận rằng truy vấn không vô tình tạo ra các bản ghi trùng lặp hoặc thiếu dữ liệu do lỗi `JOIN` hoặc `FILTER`.

Tóm lại, việc kiểm tra kích thước và phạm vi ngày của bảng bằng các hàm như `LIMIT`, `COUNT(*)`, `MIN()`, và `MAX()` là những bước nền tảng trong EDA với SQL, giúp nhà phân tích hiểu cấu trúc, tính toàn vẹn và phạm vi lịch sử của dữ liệu trước khi đi sâu vào phân tích hoặc phát triển mô hình phức tạp.
