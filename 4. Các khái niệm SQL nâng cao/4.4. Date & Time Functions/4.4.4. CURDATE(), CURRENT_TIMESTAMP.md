### I. Khái niệm và Mục đích

Các hàm như `CURDATE()` và `CURRENT_TIMESTAMP` được sử dụng để truy xuất ngày hoặc dấu thời gian (timestamp) hiện tại từ hệ thống cơ sở dữ liệu.

#### 1. CURDATE() (Lấy Ngày Hiện tại)

Hàm `CURDATE()` được sử dụng để đại diện cho **ngày hệ thống hiện tại** trong bất kỳ phép tính nào yêu cầu tham số ngày hoặc datetime.

*   **Tính tương thích:** Tài liệu lưu ý rằng `CURDATE()` có thể được gọi bằng các tên khác nhau tùy thuộc vào hệ thống cơ sở dữ liệu cụ thể đang được sử dụng, bao gồm `CURRENT_DATE`, `TODAY()`, `SYSDATE`, hoặc `GETDATE()`.
*   **Ứng dụng:** Hàm này được sử dụng chủ yếu trong các phép tính khoảng thời gian động, chẳng hạn như tính toán số ngày kể từ lần mua hàng cuối cùng của khách hàng.

#### 2. CURRENT\_TIMESTAMP (Lấy Dấu thời gian Hiện tại)

Hàm `CURRENT_TIMESTAMP` được sử dụng để lấy **ngày và giờ hiện tại của hệ thống**.

*   **Ứng dụng chính:** Hàm này được sử dụng rộng rãi khi tạo hoặc sửa đổi bảng cơ sở dữ liệu để ghi lại thời điểm một hàng được tạo hoặc sửa đổi lần cuối (siêu dữ liệu).
*   **Cú pháp ví dụ:** Khi tạo bảng mới để chụp nhanh (snapshot) dữ liệu, hàm có thể được thêm vào dưới dạng cột tính toán: `CURRENT_TIMESTAMP AS snapshot_timestamp`.

### II. Các ứng dụng nâng cao và cảnh báo về múi giờ

Các hàm ngày/giờ hiện tại này rất quan trọng cho các truy vấn động và quản trị dữ liệu:

#### 1. Lọc trong Phạm vi Ngày Động (Dynamic Date Range Filtering)

`CURDATE()` thường được sử dụng cùng với hàm `DATEDIFF()` để lọc các truy vấn theo một khoảng thời gian động dựa trên ngày hiện tại.

*   **Ví dụ:** Để tính tổng doanh số bán hàng xảy ra trong **hai tuần gần nhất**, truy vấn có thể sử dụng `DATEDIFF(CURDATE(), market_date) <= 14`. Việc sử dụng `CURDATE()` cho phép báo cáo tự động cập nhật mà không cần thay đổi ngày lọc cứng (hard-coded filter date).

#### 2. Thận trọng về Múi giờ (Time Zone Considerations)

Tài liệu cảnh báo rằng dấu thời gian được tạo ra bởi hàm `CURRENT_TIMESTAMP` (hoặc các hàm tương đương) được tạo ra bởi **máy chủ cơ sở dữ liệu**, vì vậy nó có thể khác với giờ địa phương của người dùng, tùy thuộc vào múi giờ đã được thiết lập.

*   **UTC (Coordinated Universal Time):** Nhiều cơ sở dữ liệu sử dụng UTC làm thời gian dấu thời gian mặc định. UTC là tiêu chuẩn giờ toàn cầu, không thay đổi theo Giờ tiết kiệm ánh sáng ban ngày (Daylight Savings Time). Việc này giúp đơn giản hóa các phép toán ngày/giờ so với việc sử dụng giờ địa phương.

#### 3. Sử dụng trong Views (Views)

Khi sử dụng `CURRENT_TIMESTAMP` để tạo một cột trong một **View (Khung nhìn)**, cần lưu ý rằng view không lưu trữ dữ liệu. Do đó, mỗi khi view được truy vấn, hàm `CURRENT_TIMESTAMP` sẽ chạy lại và trả về **thời gian hiện tại của hệ thống** tại thời điểm truy vấn được thực thi, chứ không phải thời gian tạo view.

#### 4. Sử dụng trong Tables (Bảng)

Khi tạo bảng mới (`CREATE TABLE`) hoặc thêm hàng mới (`INSERT INTO SELECT`), `CURRENT_TIMESTAMP` sẽ ghi lại **thời điểm chính xác khi thao tác đó xảy ra**. Điều này tạo ra một "dấu thời gian chụp nhanh" (snapshot timestamp) cho mỗi hàng, rất hữu ích cho các ứng dụng học máy, nơi tính chính xác của dữ liệu tại một thời điểm cụ thể là rất quan trọng.