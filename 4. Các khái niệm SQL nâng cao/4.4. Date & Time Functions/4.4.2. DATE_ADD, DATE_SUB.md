### I. Khái niệm và Mục đích

**Mục đích cốt lõi** của `DATE_ADD()` và `DATE_SUB()` là thực hiện **phép toán ngày tháng (date math)**, điều không thể thực hiện được khi dữ liệu ngày tháng được lưu trữ dưới dạng chuỗi ký tự (string field) thay vì kiểu dữ liệu `datetime`.

Phép tính ngày tháng này cho phép các nhà khoa học dữ liệu xác định các mốc thời gian động (dynamically determine cutoff time) để lọc hoặc tạo tính năng.

### II. Hàm DATE_ADD(): Thêm Khoảng Thời gian

Hàm `DATE_ADD()` được sử dụng để thêm một khoảng thời gian cụ thể (interval) vào một giá trị ngày hoặc datetime.

#### 1. Cú pháp và Tham số
Cú pháp của `DATE_ADD()` yêu cầu ba tham số:

*   Giá trị `datetime` ban đầu.
*   Từ khóa `INTERVAL`.
*   Khoảng thời gian muốn thêm (ví dụ: `30 MINUTE` hoặc `30 DAY`).

**Ví dụ:** Để xác định thời gian kết thúc của 30 phút sau khi thị trường mở cửa, hàm được viết là:
`DATE_ADD(market_start_datetime, INTERVAL 30 MINUTE)`.

#### 2. Ứng dụng quan trọng (Sử dụng số âm)
Mặc dù có hàm `DATE_SUB()` riêng biệt, người dùng có thể thực hiện phép trừ ngày bằng cách sử dụng `DATE_ADD()` và thêm một **số nguyên âm** (`negative number`).

*   **Ví dụ:** `DATE_ADD(market_start_datetime, INTERVAL - 30 DAY)` có tác dụng tương đương với việc trừ 30 ngày khỏi ngày bắt đầu.

### III. Hàm DATE_SUB(): Trừ Khoảng Thời gian

Hàm `DATE_SUB()` thực hiện hành động ngược lại: trừ một khoảng thời gian cụ thể khỏi một giá trị ngày hoặc datetime.

*   **Tác dụng tương đương:** Như đã đề cập ở trên, kết quả của `DATE_SUB(market_start_datetime, INTERVAL 30 DAY)` cho ra kết quả tương tự như việc sử dụng `DATE_ADD()` với tham số âm.

### IV. Các Ứng dụng Nâng cao trong Khoa học Dữ liệu

Các hàm này đóng vai trò nền tảng trong việc xây dựng các tập dữ liệu ràng buộc thời gian:

1.  **Lọc trong Phạm vi Ngày Động (Dynamic Date Range Filtering):**
    *   `DATE_ADD()` được dùng để tính toán điểm cắt thời gian (cutoff time) để lọc dữ liệu. Ví dụ, để tìm các giao dịch bán hàng xảy ra trong vòng 30 phút đầu tiên sau khi thị trường mở cửa, người dùng cần tính thời điểm 30 phút sau thời điểm bắt đầu thị trường và sử dụng thời điểm đó làm bộ lọc.
    *   Các truy vấn báo cáo động có thể sử dụng `CURDATE()` hoặc `CURRENT_DATE` kết hợp với `DATE_SUB()` (hoặc `DATE_ADD()` với số âm) để lọc dữ liệu trong các phạm vi động như "hai tuần trước" hoặc "30 ngày gần nhất".

2.  **Xác định Biến Mục tiêu Ràng buộc Thời gian (Time-Bound Target Variable):**
    *   Trong mô hình phân loại nhị phân (binary classification) dự đoán hành vi khách hàng, cần tính toán một mốc thời gian chính xác sau một sự kiện (ví dụ: ngày mua hàng đầu tiên) để xác định xem sự kiện mục tiêu có xảy ra trong khoảng thời gian đó hay không.
    *   **Ví dụ:** Để xác định liệu một khách hàng có mua hàng lần thứ hai trong vòng 30 ngày sau lần mua đầu tiên hay không, người ta cần tính **30 ngày sau ngày mua đầu tiên** (`DATE_ADD` với `INTERVAL 30 DAY`) và sử dụng kết quả đó để so sánh với ngày mua hàng tiếp theo.

### V. Khả năng Tương thích (Lưu ý về Hệ thống)

Cần lưu ý rằng các hàm ngày tháng có thể có cú pháp khác nhau giữa các hệ thống cơ sở dữ liệu (database systems). Các ví dụ trong tài liệu này sử dụng cú pháp của **MySQL 8.0**, nhưng các khái niệm về `DATE_ADD` và `DATE_SUB` vẫn nhất quán.